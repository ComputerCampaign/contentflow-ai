<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>数据爬取博客发布平台 - 后端API文档</title>
    <link rel="stylesheet" href="API文档样式.css">
</head>
<body>
    <div class="container">
        <!-- 导航栏 -->
        <nav class="navbar">
            <div class="nav-brand">
                <h1>后端API文档</h1>
                <p>数据爬取博客发布平台</p>
            </div>
            <div class="nav-menu" id="navMenu">
                <a href="#overview" onclick="scrollToSection('overview')">API概览</a>
                <a href="#auth" onclick="scrollToSection('auth')">认证授权</a>
                <a href="#user-api" onclick="scrollToSection('user-api')">用户管理</a>
                <a href="#task-api" onclick="scrollToSection('task-api')">任务管理</a>
                <a href="#crawler-api" onclick="scrollToSection('crawler-api')">爬虫配置</a>
                <a href="#content-api" onclick="scrollToSection('content-api')">内容生成</a>
                <a href="#file-api" onclick="scrollToSection('file-api')">文件管理</a>
                <a href="#monitor-api" onclick="scrollToSection('monitor-api')">监控API</a>
                <a href="#examples" onclick="scrollToSection('examples')">使用示例</a>
            </div>
            <div class="nav-toggle" id="navToggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </nav>

        <!-- 主要内容 -->
        <main class="main-content">
            <!-- API概览 -->
            <section id="overview" class="section">
                <h2>1. API概览</h2>
                
                <div class="api-info">
                    <div class="info-card">
                        <h3>基础信息</h3>
                        <ul>
                            <li><strong>Base URL</strong>: https://api.platform.com/v1</li>
                            <li><strong>协议</strong>: HTTPS</li>
                            <li><strong>认证方式</strong>: JWT Bearer Token</li>
                            <li><strong>数据格式</strong>: JSON</li>
                            <li><strong>字符编码</strong>: UTF-8</li>
                        </ul>
                    </div>
                    
                    <div class="info-card">
                        <h3>HTTP状态码</h3>
                        <ul>
                            <li><strong>200</strong>: 请求成功</li>
                            <li><strong>201</strong>: 创建成功</li>
                            <li><strong>400</strong>: 请求参数错误</li>
                            <li><strong>401</strong>: 未授权</li>
                            <li><strong>403</strong>: 权限不足</li>
                            <li><strong>404</strong>: 资源不存在</li>
                            <li><strong>500</strong>: 服务器内部错误</li>
                        </ul>
                    </div>
                </div>

                <h3>1.1 API分类</h3>
                <div class="api-categories">
                    <div class="category-card">
                        <h4>用户管理API</h4>
                        <p>用户注册、登录、权限管理</p>
                        <span class="endpoint-count">8个接口</span>
                    </div>
                    <div class="category-card">
                        <h4>任务管理API</h4>
                        <p>任务创建、查询、控制</p>
                        <span class="endpoint-count">12个接口</span>
                    </div>
                    <div class="category-card">
                        <h4>爬虫配置API</h4>
                        <p>爬虫规则、URL池管理</p>
                        <span class="endpoint-count">10个接口</span>
                    </div>
                    <div class="category-card">
                        <h4>内容生成API</h4>
                        <p>AI内容生成、模板管理</p>
                        <span class="endpoint-count">6个接口</span>
                    </div>
                    <div class="category-card">
                        <h4>文件管理API</h4>
                        <p>文件上传、下载、管理</p>
                        <span class="endpoint-count">8个接口</span>
                    </div>
                    <div class="category-card">
                        <h4>监控API</h4>
                        <p>系统状态、性能指标</p>
                        <span class="endpoint-count">5个接口</span>
                    </div>
                </div>
            </section>

            <!-- 认证授权 -->
            <section id="auth" class="section">
                <h2>2. 认证授权</h2>
                
                <h3>2.1 JWT Token认证</h3>
                <div class="auth-flow">
                    <div class="flow-step">
                        <h4>1. 获取Token</h4>
                        <p>通过登录接口获取JWT Token</p>
                    </div>
                    <div class="flow-step">
                        <h4>2. 请求头设置</h4>
                        <p>在请求头中添加Authorization字段</p>
                    </div>
                    <div class="flow-step">
                        <h4>3. Token验证</h4>
                        <p>服务器验证Token有效性</p>
                    </div>
                </div>

                <div class="code-example">
                    <h4>请求头示例</h4>
                    <pre><code>Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
Content-Type: application/json
Accept: application/json</code></pre>
                </div>

                <h3>2.2 权限级别</h3>
                <div class="permission-levels">
                    <div class="permission-card">
                        <h4>普通用户</h4>
                        <p>基础功能访问权限</p>
                        <ul>
                            <li>查看个人任务</li>
                            <li>创建爬虫配置</li>
                            <li>生成内容</li>
                        </ul>
                    </div>
                    <div class="permission-card">
                        <h4>高级用户</h4>
                        <p>扩展功能访问权限</p>
                        <ul>
                            <li>批量任务操作</li>
                            <li>高级爬虫配置</li>
                            <li>API访问限制提升</li>
                        </ul>
                    </div>
                    <div class="permission-card">
                        <h4>管理员</h4>
                        <p>系统管理权限</p>
                        <ul>
                            <li>用户管理</li>
                            <li>系统监控</li>
                            <li>全局配置</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- 用户管理API -->
            <section id="user-api" class="section">
                <h2>3. 用户管理API</h2>
                
                <!-- 用户注册 -->
                <div class="api-endpoint">
                    <div class="endpoint-header">
                        <span class="method post">POST</span>
                        <span class="path">/auth/register</span>
                        <span class="description">用户注册</span>
                    </div>
                    
                    <div class="endpoint-content">
                        <h4>请求参数</h4>
                        <div class="params-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>参数名</th>
                                        <th>类型</th>
                                        <th>必填</th>
                                        <th>说明</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>username</td>
                                        <td>string</td>
                                        <td>是</td>
                                        <td>用户名，3-20字符</td>
                                    </tr>
                                    <tr>
                                        <td>email</td>
                                        <td>string</td>
                                        <td>是</td>
                                        <td>邮箱地址</td>
                                    </tr>
                                    <tr>
                                        <td>password</td>
                                        <td>string</td>
                                        <td>是</td>
                                        <td>密码，至少8位</td>
                                    </tr>
                                    <tr>
                                        <td>display_name</td>
                                        <td>string</td>
                                        <td>否</td>
                                        <td>显示名称</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <h4>请求示例</h4>
                        <div class="code-example">
                            <pre><code>{
  "username": "john_doe",
  "email": "john@example.com",
  "password": "securePassword123",
  "display_name": "John Doe"
}</code></pre>
                        </div>

                        <h4>响应示例</h4>
                        <div class="code-example">
                            <pre><code>{
  "code": 201,
  "message": "用户注册成功",
  "data": {
    "user_id": "12345",
    "username": "john_doe",
    "email": "john@example.com",
    "display_name": "John Doe",
    "role": "user",
    "created_at": "2024-01-15T10:30:00Z"
  }
}</code></pre>
                        </div>
                    </div>
                </div>

                <!-- 用户登录 -->
                <div class="api-endpoint">
                    <div class="endpoint-header">
                        <span class="method post">POST</span>
                        <span class="path">/auth/login</span>
                        <span class="description">用户登录</span>
                    </div>
                    
                    <div class="endpoint-content">
                        <h4>请求参数</h4>
                        <div class="params-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>参数名</th>
                                        <th>类型</th>
                                        <th>必填</th>
                                        <th>说明</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>username</td>
                                        <td>string</td>
                                        <td>是</td>
                                        <td>用户名或邮箱</td>
                                    </tr>
                                    <tr>
                                        <td>password</td>
                                        <td>string</td>
                                        <td>是</td>
                                        <td>密码</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <h4>响应示例</h4>
                        <div class="code-example">
                            <pre><code>{
  "code": 200,
  "message": "登录成功",
  "data": {
    "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "token_type": "bearer",
    "expires_in": 3600,
    "user": {
      "user_id": "12345",
      "username": "john_doe",
      "email": "john@example.com",
      "role": "user"
    }
  }
}</code></pre>
                        </div>
                    </div>
                </div>

                <!-- 获取用户信息 -->
                <div class="api-endpoint">
                    <div class="endpoint-header">
                        <span class="method get">GET</span>
                        <span class="path">/users/profile</span>
                        <span class="description">获取当前用户信息</span>
                    </div>
                    
                    <div class="endpoint-content">
                        <h4>请求头</h4>
                        <div class="code-example">
                            <pre><code>Authorization: Bearer {access_token}</code></pre>
                        </div>

                        <h4>响应示例</h4>
                        <div class="code-example">
                            <pre><code>{
  "code": 200,
  "message": "获取成功",
  "data": {
    "user_id": "12345",
    "username": "john_doe",
    "email": "john@example.com",
    "display_name": "John Doe",
    "role": "user",
    "avatar": "https://example.com/avatar.jpg",
    "settings": {
      "language": "zh-CN",
      "timezone": "Asia/Shanghai"
    },
    "created_at": "2024-01-15T10:30:00Z",
    "last_login": "2024-01-20T14:25:00Z"
  }
}</code></pre>
                        </div>
                    </div>
                </div>

                <!-- 更新用户信息 -->
                <div class="api-endpoint">
                    <div class="endpoint-header">
                        <span class="method put">PUT</span>
                        <span class="path">/users/profile</span>
                        <span class="description">更新用户信息</span>
                    </div>
                    
                    <div class="endpoint-content">
                        <h4>请求参数</h4>
                        <div class="params-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>参数名</th>
                                        <th>类型</th>
                                        <th>必填</th>
                                        <th>说明</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>display_name</td>
                                        <td>string</td>
                                        <td>否</td>
                                        <td>显示名称</td>
                                    </tr>
                                    <tr>
                                        <td>avatar</td>
                                        <td>string</td>
                                        <td>否</td>
                                        <td>头像URL</td>
                                    </tr>
                                    <tr>
                                        <td>settings</td>
                                        <td>object</td>
                                        <td>否</td>
                                        <td>用户设置</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <h4>请求示例</h4>
                        <div class="code-example">
                            <pre><code>{
  "display_name": "John Smith",
  "settings": {
    "language": "en-US",
    "timezone": "America/New_York",
    "notifications": {
      "email": true,
      "push": false
    }
  }
}</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 任务管理API -->
            <section id="task-api" class="section">
                <h2>4. 任务管理API</h2>
                
                <!-- 创建任务 -->
                <div class="api-endpoint">
                    <div class="endpoint-header">
                        <span class="method post">POST</span>
                        <span class="path">/tasks</span>
                        <span class="description">创建新任务</span>
                    </div>
                    
                    <div class="endpoint-content">
                        <h4>请求参数</h4>
                        <div class="params-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>参数名</th>
                                        <th>类型</th>
                                        <th>必填</th>
                                        <th>说明</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>name</td>
                                        <td>string</td>
                                        <td>是</td>
                                        <td>任务名称</td>
                                    </tr>
                                    <tr>
                                        <td>type</td>
                                        <td>string</td>
                                        <td>是</td>
                                        <td>任务类型：crawler, content_generation, full_pipeline</td>
                                    </tr>
                                    <tr>
                                        <td>config</td>
                                        <td>object</td>
                                        <td>是</td>
                                        <td>任务配置</td>
                                    </tr>
                                    <tr>
                                        <td>schedule</td>
                                        <td>string</td>
                                        <td>否</td>
                                        <td>调度表达式（Cron格式）</td>
                                    </tr>
                                    <tr>
                                        <td>priority</td>
                                        <td>integer</td>
                                        <td>否</td>
                                        <td>优先级（1-10）</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <h4>请求示例</h4>
                        <div class="code-example">
                            <pre><code>{
  "name": "新闻爬取任务",
  "type": "full_pipeline",
  "config": {
    "crawler_config_id": "config_123",
    "content_template_id": "template_456",
    "output_format": "markdown",
    "ai_model": "gpt-3.5-turbo"
  },
  "schedule": "0 9 * * *",
  "priority": 5
}</code></pre>
                        </div>

                        <h4>响应示例</h4>
                        <div class="code-example">
                            <pre><code>{
  "code": 201,
  "message": "任务创建成功",
  "data": {
    "task_id": "task_789",
    "name": "新闻爬取任务",
    "type": "full_pipeline",
    "status": "pending",
    "created_at": "2024-01-20T10:00:00Z",
    "next_run": "2024-01-21T09:00:00Z"
  }
}</code></pre>
                        </div>
                    </div>
                </div>

                <!-- 获取任务列表 -->
                <div class="api-endpoint">
                    <div class="endpoint-header">
                        <span class="method get">GET</span>
                        <span class="path">/tasks</span>
                        <span class="description">获取任务列表</span>
                    </div>
                    
                    <div class="endpoint-content">
                        <h4>查询参数</h4>
                        <div class="params-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>参数名</th>
                                        <th>类型</th>
                                        <th>必填</th>
                                        <th>说明</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>page</td>
                                        <td>integer</td>
                                        <td>否</td>
                                        <td>页码，默认1</td>
                                    </tr>
                                    <tr>
                                        <td>size</td>
                                        <td>integer</td>
                                        <td>否</td>
                                        <td>每页数量，默认20</td>
                                    </tr>
                                    <tr>
                                        <td>status</td>
                                        <td>string</td>
                                        <td>否</td>
                                        <td>任务状态过滤</td>
                                    </tr>
                                    <tr>
                                        <td>type</td>
                                        <td>string</td>
                                        <td>否</td>
                                        <td>任务类型过滤</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <h4>响应示例</h4>
                        <div class="code-example">
                            <pre><code>{
  "code": 200,
  "message": "获取成功",
  "data": {
    "tasks": [
      {
        "task_id": "task_789",
        "name": "新闻爬取任务",
        "type": "full_pipeline",
        "status": "running",
        "progress": 65,
        "created_at": "2024-01-20T10:00:00Z",
        "updated_at": "2024-01-20T10:30:00Z"
      }
    ],
    "pagination": {
      "page": 1,
      "size": 20,
      "total": 1,
      "pages": 1
    }
  }
}</code></pre>
                        </div>
                    </div>
                </div>

                <!-- 获取任务详情 -->
                <div class="api-endpoint">
                    <div class="endpoint-header">
                        <span class="method get">GET</span>
                        <span class="path">/tasks/{task_id}</span>
                        <span class="description">获取任务详情</span>
                    </div>
                    
                    <div class="endpoint-content">
                        <h4>路径参数</h4>
                        <div class="params-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>参数名</th>
                                        <th>类型</th>
                                        <th>必填</th>
                                        <th>说明</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>task_id</td>
                                        <td>string</td>
                                        <td>是</td>
                                        <td>任务ID</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <h4>响应示例</h4>
                        <div class="code-example">
                            <pre><code>{
  "code": 200,
  "message": "获取成功",
  "data": {
    "task_id": "task_789",
    "name": "新闻爬取任务",
    "type": "full_pipeline",
    "status": "completed",
    "progress": 100,
    "config": {
      "crawler_config_id": "config_123",
      "content_template_id": "template_456"
    },
    "executions": [
      {
        "execution_id": "exec_001",
        "dag_run_id": "dag_run_123",
        "status": "success",
        "start_time": "2024-01-20T10:00:00Z",
        "end_time": "2024-01-20T10:45:00Z",
        "duration": 2700
      }
    ],
    "results": {
      "crawled_items": 150,
      "generated_content": "content_file_url",
      "output_files": ["file1.md", "file2.html"]
    },
    "created_at": "2024-01-20T10:00:00Z",
    "updated_at": "2024-01-20T10:45:00Z"
  }
}</code></pre>
                        </div>
                    </div>
                </div>

                <!-- 控制任务 -->
                <div class="api-endpoint">
                    <div class="endpoint-header">
                        <span class="method post">POST</span>
                        <span class="path">/tasks/{task_id}/control</span>
                        <span class="description">控制任务执行</span>
                    </div>
                    
                    <div class="endpoint-content">
                        <h4>请求参数</h4>
                        <div class="params-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>参数名</th>
                                        <th>类型</th>
                                        <th>必填</th>
                                        <th>说明</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>action</td>
                                        <td>string</td>
                                        <td>是</td>
                                        <td>操作类型：start, stop, pause, resume</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <h4>请求示例</h4>
                        <div class="code-example">
                            <pre><code>{
  "action": "start"
}</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 爬虫配置API -->
            <section id="crawler-api" class="section">
                <h2>5. 爬虫配置API</h2>
                
                <!-- 创建爬虫配置 -->
                <div class="api-endpoint">
                    <div class="endpoint-header">
                        <span class="method post">POST</span>
                        <span class="path">/crawler/configs</span>
                        <span class="description">创建爬虫配置</span>
                    </div>
                    
                    <div class="endpoint-content">
                        <h4>请求参数</h4>
                        <div class="params-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>参数名</th>
                                        <th>类型</th>
                                        <th>必填</th>
                                        <th>说明</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>name</td>
                                        <td>string</td>
                                        <td>是</td>
                                        <td>配置名称</td>
                                    </tr>
                                    <tr>
                                        <td>urls</td>
                                        <td>array</td>
                                        <td>是</td>
                                        <td>目标URL列表</td>
                                    </tr>
                                    <tr>
                                        <td>rules</td>
                                        <td>object</td>
                                        <td>是</td>
                                        <td>爬取规则</td>
                                    </tr>
                                    <tr>
                                        <td>headers</td>
                                        <td>object</td>
                                        <td>否</td>
                                        <td>请求头设置</td>
                                    </tr>
                                    <tr>
                                        <td>schedule</td>
                                        <td>string</td>
                                        <td>否</td>
                                        <td>调度设置</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <h4>请求示例</h4>
                        <div class="code-example">
                            <pre><code>{
  "name": "新闻网站爬虫",
  "urls": [
    "https://news.example.com/tech",
    "https://news.example.com/business"
  ],
  "rules": {
    "title_selector": "h1.title",
    "content_selector": ".article-content",
    "author_selector": ".author",
    "date_selector": ".publish-date",
    "follow_links": true,
    "max_depth": 2,
    "delay": 1
  },
  "headers": {
    "User-Agent": "Mozilla/5.0 (compatible; PlatformBot/1.0)",
    "Accept": "text/html,application/xhtml+xml"
  },
  "schedule": {
    "frequency": "daily",
    "time": "09:00"
  }
}</code></pre>
                        </div>

                        <h4>响应示例</h4>
                        <div class="code-example">
                            <pre><code>{
  "code": 201,
  "message": "爬虫配置创建成功",
  "data": {
    "config_id": "config_123",
    "name": "新闻网站爬虫",
    "status": "active",
    "created_at": "2024-01-20T10:00:00Z"
  }
}</code></pre>
                        </div>
                    </div>
                </div>

                <!-- 获取爬虫配置列表 -->
                <div class="api-endpoint">
                    <div class="endpoint-header">
                        <span class="method get">GET</span>
                        <span class="path">/crawler/configs</span>
                        <span class="description">获取爬虫配置列表</span>
                    </div>
                    
                    <div class="endpoint-content">
                        <h4>查询参数</h4>
                        <div class="params-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>参数名</th>
                                        <th>类型</th>
                                        <th>必填</th>
                                        <th>说明</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>page</td>
                                        <td>integer</td>
                                        <td>否</td>
                                        <td>页码</td>
                                    </tr>
                                    <tr>
                                        <td>size</td>
                                        <td>integer</td>
                                        <td>否</td>
                                        <td>每页数量</td>
                                    </tr>
                                    <tr>
                                        <td>status</td>
                                        <td>string</td>
                                        <td>否</td>
                                        <td>状态过滤</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <h4>响应示例</h4>
                        <div class="code-example">
                            <pre><code>{
  "code": 200,
  "message": "获取成功",
  "data": {
    "configs": [
      {
        "config_id": "config_123",
        "name": "新闻网站爬虫",
        "status": "active",
        "url_count": 2,
        "last_run": "2024-01-20T09:00:00Z",
        "success_rate": 95.5,
        "created_at": "2024-01-15T10:00:00Z"
      }
    ],
    "pagination": {
      "page": 1,
      "size": 20,
      "total": 1,
      "pages": 1
    }
  }
}</code></pre>
                        </div>
                    </div>
                </div>

                <!-- 测试爬虫配置 -->
                <div class="api-endpoint">
                    <div class="endpoint-header">
                        <span class="method post">POST</span>
                        <span class="path">/crawler/configs/{config_id}/test</span>
                        <span class="description">测试爬虫配置</span>
                    </div>
                    
                    <div class="endpoint-content">
                        <h4>请求参数</h4>
                        <div class="params-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>参数名</th>
                                        <th>类型</th>
                                        <th>必填</th>
                                        <th>说明</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>test_url</td>
                                        <td>string</td>
                                        <td>否</td>
                                        <td>测试URL，不提供则使用配置中的第一个URL</td>
                                    </tr>
                                    <tr>
                                        <td>limit</td>
                                        <td>integer</td>
                                        <td>否</td>
                                        <td>测试抓取数量限制，默认5</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <h4>响应示例</h4>
                        <div class="code-example">
                            <pre><code>{
  "code": 200,
  "message": "测试完成",
  "data": {
    "test_id": "test_456",
    "status": "success",
    "results": [
      {
        "url": "https://news.example.com/article1",
        "title": "科技新闻标题",
        "content": "文章内容摘要...",
        "author": "张三",
        "date": "2024-01-20",
        "extracted_at": "2024-01-20T10:30:00Z"
      }
    ],
    "statistics": {
      "total_urls": 1,
      "successful": 1,
      "failed": 0,
      "duration": 2.5
    }
  }
}</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 内容生成API -->
            <section id="content-api" class="section">
                <h2>6. 内容生成API</h2>
                
                <!-- 创建内容模板 -->
                <div class="api-endpoint">
                    <div class="endpoint-header">
                        <span class="method post">POST</span>
                        <span class="path">/content/templates</span>
                        <span class="description">创建内容模板</span>
                    </div>
                    
                    <div class="endpoint-content">
                        <h4>请求参数</h4>
                        <div class="params-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>参数名</th>
                                        <th>类型</th>
                                        <th>必填</th>
                                        <th>说明</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>name</td>
                                        <td>string</td>
                                        <td>是</td>
                                        <td>模板名称</td>
                                    </tr>
                                    <tr>
                                        <td>template</td>
                                        <td>string</td>
                                        <td>是</td>
                                        <td>模板内容（Jinja2格式）</td>
                                    </tr>
                                    <tr>
                                        <td>variables</td>
                                        <td>array</td>
                                        <td>是</td>
                                        <td>模板变量定义</td>
                                    </tr>
                                    <tr>
                                        <td>output_format</td>
                                        <td>string</td>
                                        <td>是</td>
                                        <td>输出格式：markdown, html, text</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <h4>请求示例</h4>
                        <div class="code-example">
                            <pre><code>{
  "name": "新闻博客模板",
  "template": "# {{ title }}\n\n**作者**: {{ author }}\n**发布时间**: {{ date }}\n\n## 摘要\n{{ summary }}\n\n## 正文\n{{ content }}\n\n---\n*本文由AI自动生成*",
  "variables": [
    {"name": "title", "type": "string", "required": true},
    {"name": "author", "type": "string", "required": false},
    {"name": "date", "type": "string", "required": true},
    {"name": "summary", "type": "string", "required": true},
    {"name": "content", "type": "string", "required": true}
  ],
  "output_format": "markdown"
}</code></pre>
                        </div>

                        <h4>响应示例</h4>
                        <div class="code-example">
                            <pre><code>{
  "code": 201,
  "message": "模板创建成功",
  "data": {
    "template_id": "template_456",
    "name": "新闻博客模板",
    "output_format": "markdown",
    "created_at": "2024-01-20T10:00:00Z"
  }
}</code></pre>
                        </div>
                    </div>
                </div>

                <!-- 生成内容 -->
                <div class="api-endpoint">
                    <div class="endpoint-header">
                        <span class="method post">POST</span>
                        <span class="path">/content/generate</span>
                        <span class="description">生成内容</span>
                    </div>
                    
                    <div class="endpoint-content">
                        <h4>请求参数</h4>
                        <div class="params-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>参数名</th>
                                        <th>类型</th>
                                        <th>必填</th>
                                        <th>说明</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>template_id</td>
                                        <td>string</td>
                                        <td>是</td>
                                        <td>模板ID</td>
                                    </tr>
                                    <tr>
                                        <td>source_data</td>
                                        <td>object</td>
                                        <td>是</td>
                                        <td>源数据</td>
                                    </tr>
                                    <tr>
                                        <td>ai_config</td>
                                        <td>object</td>
                                        <td>否</td>
                                        <td>AI生成配置</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <h4>请求示例</h4>
                        <div class="code-example">
                            <pre><code>{
  "template_id": "template_456",
  "source_data": {
    "crawled_articles": [
      {
        "title": "人工智能最新进展",
        "content": "原始文章内容...",
        "author": "李四",
        "date": "2024-01-20"
      }
    ]
  },
  "ai_config": {
    "model": "gpt-3.5-turbo",
    "max_tokens": 2000,
    "temperature": 0.7,
    "prompt": "请基于提供的文章生成一篇高质量的博客文章"
  }
}</code></pre>
                        </div>

                        <h4>响应示例</h4>
                        <div class="code-example">
                            <pre><code>{
  "code": 200,
  "message": "内容生成成功",
  "data": {
    "content_id": "content_789",
    "generated_content": "# 人工智能最新进展\n\n**作者**: 李四\n**发布时间**: 2024-01-20\n\n## 摘要\n本文介绍了人工智能领域的最新发展...",
    "metadata": {
      "word_count": 1500,
      "generation_time": 3.2,
      "model_used": "gpt-3.5-turbo"
    },
    "file_url": "https://storage.example.com/content/content_789.md",
    "created_at": "2024-01-20T10:30:00Z"
  }
}</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 文件管理API -->
            <section id="file-api" class="section">
                <h2>7. 文件管理API</h2>
                
                <!-- 上传文件 -->
                <div class="api-endpoint">
                    <div class="endpoint-header">
                        <span class="method post">POST</span>
                        <span class="path">/files/upload</span>
                        <span class="description">上传文件</span>
                    </div>
                    
                    <div class="endpoint-content">
                        <h4>请求参数</h4>
                        <div class="params-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>参数名</th>
                                        <th>类型</th>
                                        <th>必填</th>
                                        <th>说明</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>file</td>
                                        <td>file</td>
                                        <td>是</td>
                                        <td>上传的文件</td>
                                    </tr>
                                    <tr>
                                        <td>category</td>
                                        <td>string</td>
                                        <td>否</td>
                                        <td>文件分类</td>
                                    </tr>
                                    <tr>
                                        <td>description</td>
                                        <td>string</td>
                                        <td>否</td>
                                        <td>文件描述</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <h4>响应示例</h4>
                        <div class="code-example">
                            <pre><code>{
  "code": 200,
  "message": "文件上传成功",
  "data": {
    "file_id": "file_123",
    "filename": "document.pdf",
    "size": 1024000,
    "mime_type": "application/pdf",
    "url": "https://storage.example.com/files/file_123.pdf",
    "category": "document",
    "uploaded_at": "2024-01-20T10:00:00Z"
  }
}</code></pre>
                        </div>
                    </div>
                </div>

                <!-- 获取文件列表 -->
                <div class="api-endpoint">
                    <div class="endpoint-header">
                        <span class="method get">GET</span>
                        <span class="path">/files</span>
                        <span class="description">获取文件列表</span>
                    </div>
                    
                    <div class="endpoint-content">
                        <h4>查询参数</h4>
                        <div class="params-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>参数名</th>
                                        <th>类型</th>
                                        <th>必填</th>
                                        <th>说明</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>category</td>
                                        <td>string</td>
                                        <td>否</td>
                                        <td>文件分类过滤</td>
                                    </tr>
                                    <tr>
                                        <td>page</td>
                                        <td>integer</td>
                                        <td>否</td>
                                        <td>页码</td>
                                    </tr>
                                    <tr>
                                        <td>size</td>
                                        <td>integer</td>
                                        <td>否</td>
                                        <td>每页数量</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <h4>响应示例</h4>
                        <div class="code-example">
                            <pre><code>{
  "code": 200,
  "message": "获取成功",
  "data": {
    "files": [
      {
        "file_id": "file_123",
        "filename": "document.pdf",
        "size": 1024000,
        "mime_type": "application/pdf",
        "url": "https://storage.example.com/files/file_123.pdf",
        "category": "document",
        "uploaded_at": "2024-01-20T10:00:00Z"
      }
    ],
    "pagination": {
      "page": 1,
      "size": 20,
      "total": 1,
      "pages": 1
    }
  }
}</code></pre>
                        </div>
                    </div>
                </div>

                <!-- 删除文件 -->
                <div class="api-endpoint">
                    <div class="endpoint-header">
                        <span class="method delete">DELETE</span>
                        <span class="path">/files/{file_id}</span>
                        <span class="description">删除文件</span>
                    </div>
                    
                    <div class="endpoint-content">
                        <h4>路径参数</h4>
                        <div class="params-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>参数名</th>
                                        <th>类型</th>
                                        <th>必填</th>
                                        <th>说明</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>file_id</td>
                                        <td>string</td>
                                        <td>是</td>
                                        <td>文件ID</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <h4>响应示例</h4>
                        <div class="code-example">
                            <pre><code>{
  "code": 200,
  "message": "文件删除成功"
}</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 监控API -->
            <section id="monitor-api" class="section">
                <h2>8. 监控API</h2>
                
                <!-- 系统状态 -->
                <div class="api-endpoint">
                    <div class="endpoint-header">
                        <span class="method get">GET</span>
                        <span class="path">/monitor/health</span>
                        <span class="description">系统健康检查</span>
                    </div>
                    
                    <div class="endpoint-content">
                        <h4>响应示例</h4>
                        <div class="code-example">
                            <pre><code>{
  "code": 200,
  "message": "系统正常",
  "data": {
    "status": "healthy",
    "timestamp": "2024-01-20T10:00:00Z",
    "services": {
      "database": "healthy",
      "redis": "healthy",
      "storage": "healthy",
      "airflow": "healthy"
    },
    "metrics": {
      "cpu_usage": 45.2,
      "memory_usage": 68.5,
      "disk_usage": 32.1,
      "active_tasks": 5
    }
  }
}</code></pre>
                        </div>
                    </div>
                </div>

                <!-- 性能指标 -->
                <div class="api-endpoint">
                    <div class="endpoint-header">
                        <span class="method get">GET</span>
                        <span class="path">/monitor/metrics</span>
                        <span class="description">获取性能指标</span>
                    </div>
                    
                    <div class="endpoint-content">
                        <h4>查询参数</h4>
                        <div class="params-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>参数名</th>
                                        <th>类型</th>
                                        <th>必填</th>
                                        <th>说明</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>start_time</td>
                                        <td>string</td>
                                        <td>否</td>
                                        <td>开始时间（ISO格式）</td>
                                    </tr>
                                    <tr>
                                        <td>end_time</td>
                                        <td>string</td>
                                        <td>否</td>
                                        <td>结束时间（ISO格式）</td>
                                    </tr>
                                    <tr>
                                        <td>metric_type</td>
                                        <td>string</td>
                                        <td>否</td>
                                        <td>指标类型</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <h4>响应示例</h4>
                        <div class="code-example">
                            <pre><code>{
  "code": 200,
  "message": "获取成功",
  "data": {
    "time_range": {
      "start": "2024-01-20T09:00:00Z",
      "end": "2024-01-20T10:00:00Z"
    },
    "metrics": {
      "api_requests": {
        "total": 1250,
        "success_rate": 99.2,
        "avg_response_time": 120
      },
      "tasks": {
        "completed": 45,
        "failed": 2,
        "running": 3
      },
      "crawler": {
        "pages_crawled": 2500,
        "success_rate": 95.8,
        "avg_crawl_time": 2.3
      }
    }
  }
}</code></pre>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 使用示例 -->
            <section id="examples" class="section">
                <h2>9. 使用示例</h2>
                
                <h3>9.1 完整工作流示例</h3>
                <div class="workflow-example">
                    <h4>场景：创建一个新闻爬取到博客发布的完整流程</h4>
                    
                    <div class="step">
                        <h5>步骤1：用户登录</h5>
                        <div class="code-example">
                            <pre><code>POST /auth/login
{
  "username": "john_doe",
  "password": "securePassword123"
}

# 响应获取access_token
{
  "data": {
    "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  }
}</code></pre>
                        </div>
                    </div>

                    <div class="step">
                        <h5>步骤2：创建爬虫配置</h5>
                        <div class="code-example">
                            <pre><code>POST /crawler/configs
Authorization: Bearer {access_token}
{
  "name": "科技新闻爬虫",
  "urls": ["https://tech.news.com/latest"],
  "rules": {
    "title_selector": "h1.title",
    "content_selector": ".article-body"
  }
}

# 响应获取config_id
{
  "data": {
    "config_id": "config_123"
  }
}</code></pre>
                        </div>
                    </div>

                    <div class="step">
                        <h5>步骤3：创建内容模板</h5>
                        <div class="code-example">
                            <pre><code>POST /content/templates
Authorization: Bearer {access_token}
{
  "name": "科技博客模板",
  "template": "# {{ title }}\n\n{{ content }}",
  "output_format": "markdown"
}

# 响应获取template_id
{
  "data": {
    "template_id": "template_456"
  }
}</code></pre>
                        </div>
                    </div>

                    <div class="step">
                        <h5>步骤4：创建完整流程任务</h5>
                        <div class="code-example">
                            <pre><code>POST /tasks
Authorization: Bearer {access_token}
{
  "name": "科技新闻自动发布",
  "type": "full_pipeline",
  "config": {
    "crawler_config_id": "config_123",
    "content_template_id": "template_456"
  },
  "schedule": "0 9 * * *"
}

# 响应获取task_id
{
  "data": {
    "task_id": "task_789"
  }
}</code></pre>
                        </div>
                    </div>

                    <div class="step">
                        <h5>步骤5：启动任务</h5>
                        <div class="code-example">
                            <pre><code>POST /tasks/task_789/control
Authorization: Bearer {access_token}
{
  "action": "start"
}</code></pre>
                        </div>
                    </div>

                    <div class="step">
                        <h5>步骤6：监控任务进度</h5>
                        <div class="code-example">
                            <pre><code>GET /tasks/task_789
Authorization: Bearer {access_token}

# 响应显示任务状态和进度
{
  "data": {
    "status": "running",
    "progress": 75,
    "current_step": "content_generation"
  }
}</code></pre>
                        </div>
                    </div>
                </div>

                <h3>9.2 错误处理示例</h3>
                <div class="error-examples">
                    <div class="error-example">
                        <h4>认证失败</h4>
                        <div class="code-example">
                            <pre><code># 请求
GET /tasks
Authorization: Bearer invalid_token

# 响应
{
  "code": 401,
  "message": "Token无效或已过期",
  "error": "INVALID_TOKEN"
}</code></pre>
                        </div>
                    </div>

                    <div class="error-example">
                        <h4>参数验证失败</h4>
                        <div class="code-example">
                            <pre><code># 请求
POST /tasks
{
  "name": "",
  "type": "invalid_type"
}

# 响应
{
  "code": 400,
  "message": "请求参数验证失败",
  "errors": [
    {
      "field": "name",
      "message": "任务名称不能为空"
    },
    {
      "field": "type",
      "message": "无效的任务类型"
    }
  ]
}</code></pre>
                        </div>
                    </div>

                    <div class="error-example">
                        <h4>资源不存在</h4>
                        <div class="code-example">
                            <pre><code># 请求
GET /tasks/nonexistent_task

# 响应
{
  "code": 404,
  "message": "任务不存在",
  "error": "TASK_NOT_FOUND"
}</code></pre>
                        </div>
                    </div>
                </div>

                <h3>9.3 最佳实践</h3>
                <div class="best-practices">
                    <div class="practice-item">
                        <h4>1. 错误重试机制</h4>
                        <p>对于网络错误或临时性错误，建议实现指数退避重试机制</p>
                        <div class="code-example">
                            <pre><code>import time
import requests

def api_request_with_retry(url, data, max_retries=3):
    for attempt in range(max_retries):
        try:
            response = requests.post(url, json=data)
            if response.status_code == 200:
                return response.json()
        except requests.RequestException:
            if attempt < max_retries - 1:
                time.sleep(2 ** attempt)  # 指数退避
            else:
                raise</code></pre>
                        </div>
                    </div>

                    <div class="practice-item">
                        <h4>2. 分页处理</h4>
                        <p>对于列表接口，建议使用分页参数避免一次性加载过多数据</p>
                        <div class="code-example">
                            <pre><code>def get_all_tasks(api_client):
    all_tasks = []
    page = 1
    while True:
        response = api_client.get(f'/tasks?page={page}&size=50')
        tasks = response['data']['tasks']
        all_tasks.extend(tasks)
        
        if len(tasks) < 50:  # 最后一页
            break
        page += 1
    
    return all_tasks</code></pre>
                        </div>
                    </div>

                    <div class="practice-item">
                        <h4>3. Token刷新</h4>
                        <p>监控Token过期时间，提前刷新避免请求失败</p>
                        <div class="code-example">
                            <pre><code>class APIClient:
    def __init__(self):
        self.token = None
        self.token_expires_at = None
    
    def ensure_valid_token(self):
        if not self.token or time.time() > self.token_expires_at:
            self.refresh_token()
    
    def request(self, method, url, **kwargs):
        self.ensure_valid_token()
        headers = kwargs.get('headers', {})
        headers['Authorization'] = f'Bearer {self.token}'
        kwargs['headers'] = headers
        return requests.request(method, url, **kwargs)</code></pre>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="API文档脚本.js"></script>
</body>
</html>